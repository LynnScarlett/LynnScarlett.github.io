---
title: 一些手写代码题（前端）
date: 2019-03-19 17:19:34
categories:
  - JavaScript
  - 求职
tags:
  - 面试
---

# 一些手写代码题

春天找工作，遇到了许多手写代码的场景，从基本数据结构（链表，二叉树），到实际应用的场景（闭包，并发），都有涉及。

## 闭包

### 实现一个 repeat 函数

问题描述：实现一个 repeat(fn, times, interval) 函数，使得

```js
let s = repeat(console.log, 5, 500)
s("message")
// 输出 'message' 间隔0.5s
```

思路：

1. 要注意多参数情况；
2. 当 fn 耗时大于间隔时，下一次 fn 执行需要等待足够的 interval；
3. 注意闭包函数实现时，不要修改内部的 times 和 interval。

实现：

```js
function repeat(fn, times, interval) {
  return (...args) => {
    let localTimes = times
    let timeout = () => {
      setTimeout(() => {
        localTimes--
        fn(...args)
        if (localTimes) {
          timeout()
        }
      }, interval)
    }
    timeout()
  }
}
```

### 实现一个 并发控制 函数

问题描述： 实现一个函数 `request(urls, max, callback)`，实现发送 urls 数组里的请求，最大并发数为 max，所有请求结束后，调用 callback。

思路：首先看到所有请求结束之后的调用，首先想到的是`Promise.all`方法，但是这样实现并发比较困难。这里想的是

1. 发送 max 个请求；
2. 每个请求结束之后发起下一个请求；
3. 当 urls 数组里没有待发请求的时候，调用 callback。

实现：

```js
function request(urls, max, callback) {
  let localUrls = urls.slice()
  let called = false
  let req = () => {
    fetch(localUrls.shift()).then(() => {
      if (localUrls.length) {
        req()
      } else {
        called = true
        callback()
      }
    })
  }
  for (let i = 0; i < max; i++) {
    req()
  }
}
```

## 二叉树

### 二叉树路径

问题描述： 
