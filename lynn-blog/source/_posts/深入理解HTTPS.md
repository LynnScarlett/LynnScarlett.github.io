---
title: 深入理解HTTPS
date: 2019-03-08 14:09:26
categories:
  - 前端基础
tags:
  - HTTP
  - HTTPS
---

# 深入理解 HTTPS

在春天的面试过程中，HTTP/HTTPS 作为网络基础的一部分，几乎个面试官都有问到。本文将从网络协议开始，分析 HTTPS 如何做到相对安全的网络传输。

## TL;DR

- 使用数字签名、数字证书建立 SSL 连接
- 使用连接时的随机数生成对称密钥加密报文

## HTTP 报文

未经过加密的 HTTP 报文在传输时，主要面临三个问题

1. 明文传输导致敏感信息泄露
2. 易遭受 MitM 攻击
3. 易遭篡改

而 HTTPS 在 HTTP 的基础之上，在应用层下的表示层进行 SSL 加/解密，使得明文信息受到保护。

## 加密方式

常用的加密方式可以分成两种

- 对称密钥加密
- 非对称密钥加密（公开密钥加密）

对称密钥加密在加密和解密时使用相同的密钥，或是使用两个可以简单地相互推算的密钥。优点是加解密速度快，缺点是双方需要获取相同秘钥。

非对称密钥需要两个密钥，一个是公开密钥，另一个是私有密钥；一个用作加密，另一个则用作解密。使用其中一个密钥把明文加密后所得的密文，只能用相对应的另一个密钥才能解密得到原本的明文；甚至连最初用来加密的密钥也不能用作解密。而且知道了其中一个，并不能凭此计算出另外一个；因此其中一个可以公开，称为公钥，任意向外发布；不公开的密钥为私钥，必须由用户自行严格秘密保管，绝不透过任何途径向任何人提供，也不会透露给被信任的要通信的另一方。优点是较为安全，只要私钥不泄露，传输就能保证单向的安全；缺点是加/解密速度较慢。

所以，HTTPS的传输过程就可以分成两步：1. 使用非对称密钥建立连接，交换生成对称密钥的必要信息；2. 使用生成的对称密钥加密HTTP报文。

